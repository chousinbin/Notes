# Cloud Computing

- 平时：30%
  - 作业 * 4 = 12分
  - 阶段测验 * 4 = 10分
  - 上机 = 8 分
- 期末：70%

## 03x00 understanding

###  03x01 origins and influences

#### history

1961 - utility computing 效用计算

2006 - cloud computing 云计算正式提出 lease 租用服务器

2006 - 2009

2009 +

#### definitions

pay - per - use

self - service

NIST: Cloud computing is a model for enabling **ubiquitous, convenient, on-demand** network access to a shared pool of configurable computing resources (e.g., networks, servers, storage, applications, and services) that can be rapidly provisioned and released with minimal management effort or service provider interaction.

this book: Cloud computing is a specialized form of **distributed computing** that introduces **utilization models** for **remotely** provisioning **scalable** and  **measured** resources.

#### Business Drivers 商业驱动力

- capacity planning 容量规划：future demand
  - lead strategy 领先策略：anticipation of demand
  - lag strategy 滞后策略：when reach its full capacity
  - match strategy 匹配策略：adding IT resource capacity in small increment as demand increases
- cost reduction 降低成本
- organizational agility 组织灵活性

#### Tech innovation

- clustering 集群：failover features, redundancy, 
- grid computing 网格计算
- virtualization 虚拟化
- tech innovation vs. enabling tech 计算创新和使能计算

### 03x02 basic concept and terminology *

#### Cloud

a distinct IT environment that is designed for the purpose of remotely provisioning scalable and measured IT resource.

<img src="https://cdn.jsdelivr.net/gh/chousinbin/Image/202403041455577.png" alt="image-20240304145548539" style="zoom:33%;" />

#### IT resource

a physical or virtual IT - related artifact can be software - based or hardware - based.

<img src="https://cdn.jsdelivr.net/gh/chousinbin/Image/202403041455063.png" alt="image-20240304145526980" style="zoom: 33%;" />

#### On - Premise 企业内部的

IT resource that is cannot be cloud - based

- can access and interact with a cloud - based IT resource
- can be moved to a cloud
- IT resource can exist in cloud or on - premise

#### Cloud provider and Cloud consumer

#### Scaling 可扩展性

- Horizontal scaling 水平扩展，不用停机，弹性增长与收缩
  - scaling out：增加相同资源 $add$
  - scaling in：释放相同资源 
- Vertical scaling 垂直扩展，可能停机
  - scaling up：换一个高性能资源 $replace$
  - scaling down：换一个低性能资源

#### Cloud service

any IT resource that is made **remotely accessible** via a cloud, provide IT resources as services that encapsulate other IT resouce

- remotely
- as-a-service
- a service - levlel agreement(SLA) 服务水平协议 which **between provider and consumer**

#### Cloud Service Consumer

a **temporary** runtime role assumed bu a software program when it accesses a cloud service

<img src="https://cdn.jsdelivr.net/gh/chousinbin/Image/202403071351264.png" alt="image-20240307135134175" style="zoom:50%;" />

### 03x03 goals and benefits

- scalability
- reliablility and availability

### 03x04 risks and challenges

- increased sercurity vulnerebilities(one cloud resource usually be used by different Cloud Consumer)
- reduced operational governance control
- limited portability between Cloud Providers
- multi-regional compliance and legal issues

## 04x00 fundamental concepts and models

### 04x01 roles and boundaries

#### Cloud provider

- on going operation
- provides cloud-based IT resource

#### Cloud Consumer

- formal contract or arrangement

#### Cloud Service Owner

legally owns a cloud service, cloud provider and consumer both can be cloud service owner

#### Cloud Resource Administrator

- cloud provider
- cloud consumer
- third party organization contracted

#### organizational boundary

the physical perimeter

#### trust boundary

a logical perimeter

### 04x02 Cloud Characteristics*

- on-demand usage

  。。。

- ubiquitous access 随处访问

- multitenancy 多租户 and resource pooling

  each is isolated with other, IT resouce can be **dynamically assigned and reassigned**

- elasticity 弹性

  ...

- measured usage 可测量使用

  keep track of the usage

- resiliency 可恢复性

  failover 故障转移 that distributes redundant 冗余 implementation 实例 of IT resource

### 04x03 Cloud Delivery Model 云交付模型

pre-packaged combination of IT resource offered by a cloud provider

#### IaaS

Infrastructure-as-a-Service 基础设施作为服务

hardware, network, connectivity, OS and other raw IT resources

#### PaaS

Platform-as-a-Service 平台作为服务

ready-to-use environment

#### SaaS

Software-as-a-Service 软件作为服务

### 03x04 Cloud Deployment Model 云部署模型

a specific type of cloud environment, primarily, distinguished by owner ship, size and access;

#### Public Cloud

publicly accessible

#### Community Cloud

access is **limited to a special community** of cloud consumers, others not granted access unless allowed by the community.

#### Private Cloud

owned by a single organization.

e.g. NAS

#### Hybrid Cloud

comprised of two or more different Cloud Deployment Model

## 05x00 

### 05x01 Broadband Network and Internet Architecture

all cloud must connected to a network

Cloud and Internet both go and down

#### ISP

backbone by ISP

core Router

multinational

### 05x02 Data Center Technology

#### Data Center

- Grouping IT resources in close proximity
- Power sharing
- Higher efficiency in shared IT resource usage
- Improved accessibility for IT personnel

#### Modern data centers

specialized IT infrastructure used to house centralized

#### Technology

1 - 10

#### Virtualization

Data Center Resources: physical and virtualized

physical resource

virtualization resource layer: abstract and control of the resource



- easier to allocate
- operate
- release monitor
- control

#### hypervisor

#### VIM(Virtualization Infrastructure Management)

### 05x04 Virtualization Technology

virtualization is the process of converting a physical IT resource into a virtual IT resource

Most type of IT resource can be virtualized

#### virtualization software create new virtual server

- allocation a physical IT resource
- install Operating system

#### host or physical host 主机或物理主机

virtualization software runs on a physical host

#### virtual machine management 虚拟机管理器

also be called hypervisor, VM monitor, VM manager

#### 

1. Hardware Independence

   resolving incompatibility 不兼容

2. Server consolidation 服务器整合

   different virtual servers to share one physical server

3. resource replication

   virtual server are created as virtual disk image

4. OS based

5. Hardware based 补图

   directly install to physical host hardware  bypass the host OS

6. virtualization management



### 05x05 multitenant Tech

multiple users to access the same application logic simultaneously

- each tenant has its own **view**
- don’t access others date

#### individually features

- User interface
- business process
- data model
- access control

### 05x06 Service Tech *

service tech is **keystone** foundation of cloud

#### Service Agent

service agent are event-driven programs designed to intercept message at runtime.

- active service agent

  intercepting and reading the contents of a message

  making **changes** to the message contents(most of header data and less commonly the body content) 

  or change to the message path itself

- passive service agent

  only intercepting and reading the contents of a message

  do not change message content, for monitoring, logging and reporting

# 6 Fundamental Cloud Security

**information security**: protect the integrity of and access to computer system and data

**IT security measure:** aim to defend against threats and interference that arise from both malicious intent and unintentional user error

## 6.1 Basic Terms and Concepts *

1. **Confidentiality** 保密性 : be made accessible only to authorized parties
2. **Integrity** 完整性 : not having been altered by an unauthorized party
3. **Authenticity** 真实性 : provided by an authorized source
4. **Availability** 可用性 : being accessible and usable during a specified time period
5. **Threat** 威胁 : a potential security violation
6. **Vulnerability** 漏洞: is a weakness that can be exploited
7. **Risk** 风险 : is the possibility of loss or harm arising from performing an activity
8. **Security Controls**: are countermeasures used to prevent or respond to security threats and to reduce or avoid risk
9. **Security Mechanisms**: protect IT resource
10. **Security Policies**: established a set of security rules and regulations

##  6.2 Threat Agent 威胁作用者

a threat agent is an entity that poses a threat 

#### Anonymous Attacker 匿名攻击者

is a non-trusted cloud service consumer without permissions in the cloud

usually exist as an external software program

#### Malicious Service Agent 恶意服务代理

is able to intercept and forward the network traffic that flows within a cloud

exist as a service agent or an external program

#### Trusted Attacker 受信的攻击者

as the cloud consumer and attempt to exploit legitimate credential to target cloud providers and the cloud tenants with whom they share IT resources

#### Malicious Insider 恶意的内部人员

human threat agents acting on behalf of or in relation to the cloud provider

typically current or former employees or third parties

## 6.3 Cloud Security Threat

#### traffic eavesdropping 流量窃听

when: data being transferred to or within a cloud

who: malicious service agent

how: compromise the confidentiality

#### malicious Intermediary 恶意媒介

who: malicious service agent

what: interface and change

how: confidentiality and integrity

#### Denial of Service 拒绝服务

what: overload IT resource

who: trusted Attacker

how: Availability

#### Insufficient Authorization 授权不足

what: granted to an attacker erroneously or too broadly

who: 

how: 

#### Virtualization Attack 虚拟化攻击



#### Overlapping Trust Boundaries 信任边界重叠

# 7 Cloud Infrastructure Mechanisms

> 云基础设施机制

## 7.1 Logic Network Perimeter

> 逻辑网络边界

a virtual network boundary

### 

- non - authorized users
- non - user
- cloud consumer
- control the bandwidth

### Network Device

- Virtual Firewall
- Virtual Network: VLAN

## 7.2 Virtual Server

a form **virtualization software** that emulates a physical server. Is the most foundational building block of cloud environment.

The number of **instances** a given physical server can share is **limited** by capacity.

## 7.3 Cloud Storage Device

cloud - based provisioning 基于云

can be virtualized

remote access via cloud storage services

### Cloud Storage Levels

- Files
- Blocks: the lowest level of storage and closest to the hardware
- Datasets: table - based, delimited or record format
- Objects: data and its associated metadata are organized as Web-based resources

### Network Storage Interface

- SCSI

### Object Storage Interface

Various typed of data can be referenced and stored.

### Database Storage Interface

typically support **query language**, using standard API or an administrative user - interface

#### Relational Data Storage: 

rely on tables to organize similar data into rows and columns

Challenges pertain to scaling and performance

#### Non - Relational Data Storage

- looser structure
- less emphasis on defining relationship
- to avoid the potential complexity and processing overhead
- limit data portability

## 7.4 Cloud Usage Monitor

is a lightweight and autonomous software program responsible for collecting and processing IT resource usage data.

- Monitoring Agent 监控代理
- Resource Agent 资源代理
- Polling Agent 轮询代理

### Monitoring Agent

intermediary event driven program that exist as a service agent and resides along existing communication paths to transparently monitor and analyze dataflows.

to measure network traffic and message ...指标

###  Resource Agent

is a processing module that collects usage data by having event - driven interactions with specialized resource software.

monitor usage metrics

### Polling Agent

is a processing module that collects cloud service usage data by polling IT resources. used to periodically monitor IT resource status.

## 7.5 Resource Replication

>  资源复制

as the creation of multiple instances of the same IT resource, resource replication is typically performed when an IT resource’s availability and performance need to be enable;

## 7.6 Ready - Made Environment

is a defining component of the **PaaS** cloud delivery model that represents a pre-defined , cloud-based platform ...

- pre - installed IT resource , such as database, middleware, development tools, and governance tools
- a complete software development kit (SDK)
- middleware is available for multitenant platform

# 8. Specialized Cloud Mechanisms

## 8.1 Automated Scaling Listener 自动伸缩监听器

①**a service agent** that **monitors and tracks** communications between ②*cloud service consumers and cloud services* ③*for* **dynamic** scaling purposes

Automated scaling listeners are ①**deployed within the cloud**, typically ②**near the firewall**, from where they ③**automatically track workload(负载) status information.**

**Automatically scaling** IT resources out or in based on parameters(参数) previously defined by the cloud consumer (commonly referred to as auto-scaling). 

**Automatic notification**（通知）of the cloud consumer when  workloads exceed① current thresholds（阈值）or fall below allocated resources . This way, the cloud consumer can② choose to adjust its current IT resource allocation. 

<img src="https://cdn.jsdelivr.net/gh/chousinbin/Image/202403211411072.png" alt="image-20240321141155959" style="zoom:50%;" />

## 8.2 Load Balancer 负载均衡器

A common approach to① **horizontal scaling** is to balance a workload ② **across two or more IT resources** to increase performance and capacity **beyond what a single IT resource can provide**. 
The load balancer mechanism is a **runtime agent**  with logic fundamentally based on this premise. 

#### Workload Distribution Functions

- Asymmetric Distribution 非对称分配：**larger workloads** are issued to IT resources with **higher processing** capacities；
- Workload Prioritization 负载优先级：workloads are scheduled(调度), queued(排队), discarded(丢弃), and distributed workloads **according to their priority levels**；
- Content-Aware Distribution 内容感知分配：requests are distributed to different IT resources as dictated(指示) by **the request content**；

<img src="https://cdn.jsdelivr.net/gh/chousinbin/Image/202403211412903.png" alt="image-20240321141217802" style="zoom:50%;" />



#### Exist

- multi-layer network switch 多层网络交换机
-  dedicated hardware appliance 专门的硬件设备
- dedicated software-based system (common in server operating systems)  专门的基于软件的系统
-  service agent (usually controlled by cloud management software) 服务代理

The load balancer is typically located on the communication path between the IT resources generating the workload and the IT resources performing the workload processing.

## 8.3 SLA Monitor

The SLA monitor mechanism is used to specifically ①observe the **runtime performance** of cloud services to ②ensure that they are fulfilling（履行） the contractual（合同） $QoS$ requirements that are published in SLAs.

The system can **proactively repair or failover** cloud services when the SLA monitor reports a cloud service as “down”.

## 8.4 Pay-Per-Use Monitor

The pay-per-use monitor mechanism ①**measures** cloud-based IT resource **usage** in accordance with **predefined pricing parameters** and ②**generates usage logs** for fee calculations and billing purposes.

#### Typical Monitoring Variables

- request / response message quantity 请求 / 响应消息数量
- transmitted data volume 传送的数据量
- bandwidth consumption 带宽消耗

The data collected by the pay-per-use monitor is processed by a billing management system（计费管理系统）that calculates the payment fees. 

## 8.5 Audit Monitor 审计监控器

The audit monitor mechanism is used to① **collect audit tracking data** for networks and IT resources ②in support of (or dictated（命令） by) **regulatory(管理) and contractual obligations（合同义务）**

<img src="https://cdn.jsdelivr.net/gh/chousinbin/Image/202403211449004.png" alt="image-20240321144930874" style="zoom:50%;" />

## 8.6 Failover System 故障转移

The failover system mechanism is used to increase ①the **reliability and availability** of IT resources ---（目标） by ②**using established clustering technology** to **provide redundant  implementations**. ----（措施）

- commonly used for mission-critical programs (关键任务程序)and reusable (可重用的)services 
- span **more than one geographical region** so that each location hosts one or more redundant implementations of the same IT resource

### Two Basic Configuration

#### Active - Active

redundant implementations of the IT resource actively serve the workload synchronously

#### Active - Passive

a standby（待机） or inactive(非活跃) implementation is activated to take over the processing from the IT resource that becomes unavailable, and the corresponding workload is redirected （重定向）to the instance taking over the operation.



## 8.7 Hypervisor 虚拟机监视器



## 8.8 Resource Cluster 资源集群

The resource cluster mechanism is used to ①group multiple IT resource instances so that they can be operated ②as a single IT resource.

<img src="https://cdn.jsdelivr.net/gh/chousinbin/Image/202403251339573.png" alt="image-20240325133951515" style="zoom:33%;" />

#### Advantage

This increases the combined computing capacity, load balancing, and availability of the clustered IT resources.

#### Types

1. Server Cluster: physical or virtual servers are cluster to increase performance and availability.
2. Database Cluster: 
3. Large Dataset Cluster: 

#### Basic Resource Cluster

1. Load Balanced Cluster 负载均衡集群
2. HA Cluster HA集群：high-availability cluster, it implements a failover system mechanism.

## 8.9 Multi-Device Broker 多设备代理

The **multi-device broker** mechanism is used to facilitate(帮助) ①**runtime data transformation** so as to make a cloud service accessible to② a wider range of cloud service consumer programs and devices. 

<img src="https://cdn.jsdelivr.net/gh/chousinbin/Image/202403251356299.png" alt="image-20240325135627225" style="zoom:33%;" />

#### Incorporate gateway components

- XML Gateway
- Cloud Storage Gateway
- Mobile Device Gateway

## 8.10 State Management Database 状态管理数据库

A state management database is a ①storage device that is used to② temporarily persist state data for③ software programs.

<img src="https://cdn.jsdelivr.net/gh/chousinbin/Image/202403251413444.png" alt="image-20240325141346324" style="zoom:33%;" />

# 9. Cloud Management Mechanisms

## 9.1 Remote Administration System

The remote administration system mechanism provides ①tools and user-interfaces for ②external cloud resource administrators to ③configure and administer cloud-based IT resources.

<img src="https://cdn.jsdelivr.net/gh/chousinbin/Image/202403251416011.png" alt="image-20240325141614962" style="zoom:33%;" />

Remote administration system can establish a ①portal(入口) for access to ②administration and management features(控制和管理功能) of various underlying systems.

### Two primary types of portals

1. Usage and Administration Portal 使用与管理入口

   A general purpose portal that ①centralizes management controls to different cloud-based IT resources and can further② provide IT resource usage reports. 

2. Self - Service Portal 自助服务入口

   This is essentially(本质上) a ①shopping portal that allows ②cloud consumers to search an ③up-to-date list of cloud services and IT resources that are available from a cloud provider (usually for lease).

## 9.2 Resource Management System

The resource management system mechanism helps ①coordinate（协调） IT resources in response to ②management actions performed by both ③cloud consumers and cloud providers.

<img src="https://cdn.jsdelivr.net/gh/chousinbin/Image/202403251441341.png" alt="image-20240325144130287" style="zoom:33%;" />

<img src="https://cdn.jsdelivr.net/gh/chousinbin/Image/202403251446298.png" alt="image-20240325144629217" style="zoom: 50%;" />

## 9.3 SLA Management System

The SLA management system mechanism represents a ①range of commercially available cloud management products that provide features ②pertaining to the administration, collection, storage, reporting, and runtime notification of SLA data.

<img src="https://cdn.jsdelivr.net/gh/chousinbin/Image/202403251448767.png" alt="image-20240325144802714" style="zoom:33%;" />

<img src="https://cdn.jsdelivr.net/gh/chousinbin/Image/202403251451094.png" alt="image-20240325145116990" style="zoom: 50%;" />

## 9.4 Billing Management System

The billing management system mechanism is dedicated to the ①collection and processing of usage data as it pertains to cloud provider accounting （结算）and cloud consumer billing. 
Specifically, the billing management system relies on pay-per-use monitors to gather runtime usage data that is stored in a repository that the system components then draw from for billing, reporting, and invoicing purposes。

<img src="https://cdn.jsdelivr.net/gh/chousinbin/Image/202403251452581.png" alt="image-20240325145226514" style="zoom:33%;" />

Pricing models can vary from the traditional pay-per-use models, to flat-rate（固定费率） or pay-per-allocation modes（按分配付费）, or combinations thereof.
Billing arrangements be based on pre-usage and post-usage payments（使用前支付或使用后支付）.

<img src="https://cdn.jsdelivr.net/gh/chousinbin/Image/202403251455737.png" alt="image-20240325145512661" style="zoom: 50%;" />

# 11 Fundamental Cloud Architectures

## 11.1 Workload Distribution Arch

workload distribution architecture----IT resources can be ①horizontally scaled via the addition of one or more identical IT resources, and a load balancer that provides ②runtime logic capable of evenly(平均) distributing the workload among the available IT resources.

<img src="https://cdn.jsdelivr.net/gh/chousinbin/Image/202403281359821.png" alt="image-20240328135942741" style="zoom:33%;" />

### Advantage

- reduces both IT resource ①over-utilization 过度使用 and under-utilization dependent upon the ②sophistication 复杂的 of the load  balancing algorithms and ③runtime logic.
- workload distribution commonly carried out in support of distributed virtual servers, cloud storage devices, and cloud services. 

### following mechanisms

- Audit Monitor 审计监控器
- Cloud Usage Monitor 云使用监控器
- Hypervisor 虚拟机监视器
- Logical Network Perimeter 逻辑网络边界
- Resource Cluster 资源集群
- Resource Replication 资源复制

## 11.2 Resource Pooling Arch

A resource pooling architecture is based on the use of one or more resource pools, in which ①identical IT resources are grouped and maintained ②by a system that automatically ensures that they ③remain  synchronized.

<img src="https://cdn.jsdelivr.net/gh/chousinbin/Image/202403281406183.png" alt="Snipaste_2024-03-28_14-06-22" style="zoom:33%;" />

### Sibling Resource Pools 

> 同级资源池

one or more pools are the part of a larger poll that is be called Sibling Resource Pools.

<img src="https://cdn.jsdelivr.net/gh/chousinbin/Image/202403281415956.png" alt="image-20240328141507831" style="zoom:33%;" />

### Nested pool

> 嵌套资源池

。。。

<img src="https://cdn.jsdelivr.net/gh/chousinbin/Image/202403281415724.png" alt="image-20240328141522594" style="zoom:33%;" />

## 11.3 Dynamic Scalability Arch *

The dynamic scalability architecture is an architectural model based on a system of ①predefined scaling conditions that ②trigger the dynamic allocation of IT resources from resource pools.

### common types of dynamic scaling

- Dynamic Horizontal Scaling 动态水平扩展
- Dynamic Vertical Scaling 动态垂直扩展
- Dynamic Relocation 动态重定位：IT resource relocation to a host with more capacity

## 11.4 Elastic Resource Capacity Arch

The elastic resource capacity architecture is primarily related to the ①dynamic provisioning of virtual servers, using a system that ②allocates and reclaims（回收） CPUs and RAM in ③immediate response to the ④fluctuating processing requirements of hosted IT resources 

belong to **Vertical Scaling.**

## 11.5 Service Load Balancing Arch

The service load balancing architecture can involve the following mechanisms in addition to the load balancer

-  Cloud Usage Monitor**云使用监控器**

- Resource Cluster**资源集群**

- Resource Replication **资源复制**

<center class="half">
    <img src="https://cdn.jsdelivr.net/gh/chousinbin/Image/202404011343184.png" width = 400 title = 1/>
    <img src="https://cdn.jsdelivr.net/gh/chousinbin/Image/202404011345838.png" width = 400 title = 2/>
</center>

## 11.6 Cloud Bursting Arch

The cloud bursting architecture establishes a form of ①dynamic scaling that② scales or “bursts out” on-premise IT resources into a cloud whenever ③predefined capacity thresholds have been reached.

The corresponding cloud-based IT resources are redundantly pre-deployed but remain inactive until cloud bursting occurs.
After they are no longer required, the cloud-based IT resources are released and the architecture “bursts in” back to the on-premise environment.
The automated scaling listener determines when to redirect requests to cloud-based IT resources, and resource replication is used to maintain synchronicity between on-premise and cloud-based IT resources in relation to state information 

<img src="https://cdn.jsdelivr.net/gh/chousinbin/Image/202404011356807.png" style="zoom:33%;" />

## 11.7 Elastic Disk Provisioning Arch

The elastic disk provisioning architecture establishes a ①dynamic storage provisioning system that ensures that ②the cloud consumer is granularly（精细） billed for ③the exact amount of storage that it actually uses.
This system uses **thin-provisioning technology**(自动精简供给技术) for the dynamic allocation of storage space, and is further supported by **runtime usage monitoring** to collect **accurate（准确的）usage data** for billing purposes.

<img src="https://cdn.jsdelivr.net/gh/chousinbin/Image/202404011435493.png" alt="image-20240401143512411" style="zoom: 50%;" />

## 11.8 Redundant Storage Arch

The redundant storage architecture introduces(引入) a① **secondary duplicate cloud storage device** as part of a failover system that ②**synchronizes its data** with the data in the ③primary cloud storage device.

A **storage service gateway** diverts（转移） cloud consumer requests to the secondary device whenever the primary device fails。

A **logical unit number (LUN)** is a logical drive that represents a partition（分区） of a physical drive.

<img src="https://cdn.jsdelivr.net/gh/chousinbin/Image/202404011431949.png" alt="image-20240401143139906" style="zoom:50%;" />

The **storage service gateway** is ①a component that acts as the external interface to cloud storage services, and is ②capable of automatically redirecting cloud consumer requests whenever the location of the requested data has changed.

<img src="https://cdn.jsdelivr.net/gh/chousinbin/Image/202404011434342.png" alt="image-20240401143417262" style="zoom: 33%;" />

This cloud architecture primarily relies on a **storage replication system** that keeps the primary cloud storage device synchronized with its duplicate secondary cloud storage devices.

# 12 Advanced Cloud Arch

## 12.1 Hypervisor Clustering Arch *

Hypervisor clustering architecture: establishes a high-availability cluster of hypervisors across multiple physical servers.

<img src="https://cdn.jsdelivr.net/gh/chousinbin/Image/202404011445464.png" alt="image-20240401144524396" style="zoom:33%;" />

- **Heartbeats** (心跳):  ①system-level messages exchanged ②between hypervisors, hypervisors and virtual servers, and hypervisors and VIMs.

  <img src="https://cdn.jsdelivr.net/gh/chousinbin/Image/202404011451474.png" alt="image-20240401145146440" style="zoom:33%;" />

- **VIM**: control the hypervisor cluster, which sends regular heartbeat messages to the hypervisors① to confirm(确认) that they are up and running. ②Unacknowledged heartbeat messages, VIM to initiate the live VM migration program, move the affected virtual servers to a new host.

- **Live VM migration**: a system that is capable of relocating virtual servers or virtual server instances at runtime.

  <img src="https://cdn.jsdelivr.net/gh/chousinbin/Image/202404011451255.png" alt="image-20240401145133214" style="zoom:33%;" />

**The other physical servers and the VIM stop receiving heartbeat messages from Physical Server B.**

The Physical Server B was failed, and Virtual Server C be transformed from Physical Server B to Physical Server C.

<img src="https://cdn.jsdelivr.net/gh/chousinbin/Image/202404011456778.png" alt="image-20240401145654692" style="zoom:50%;" />



## 12.2 Load balanced Virtual Server Instances Arch *

Physical server over and under-utilization can increase dramatically(显著地) over time, s

**The load balanced virtual server instances architecture** establishes a ①capacity **watchdog system** that dynamically calculates ②*virtual server instances and associated workloads*, ③before distributing the processing across available physical server hosts

<img src="https://cdn.jsdelivr.net/gh/chousinbin/Image/202404081348948.png" alt="image-20240408134841875" style="zoom:50%;" />

### Watchdog System

- a capacity watchdog cloud usage monitor
- the live VM migration program 在线 VIM 迁移程序
- a capacity planer 容量计划器 = Load balancer + VIM’s part

<center class = “third">
	<img src="https://cdn.jsdelivr.net/gh/chousinbin/Image/202404081402370.png" width = '300'/>
    <img src="https://cdn.jsdelivr.net/gh/chousinbin/Image/202404081403572.png" width = '300'/>
    <img src="https://cdn.jsdelivr.net/gh/chousinbin/Image/202404081410057.png" width = '300'/>
</center>

## 12.3 Non - Disruptive Service Relocation Arch *

> 不中断服务重定位架构

**non-disruptive service relocation architecture** establishes a system by which a predefined event triggers the *duplication* or *migration* of a cloud service implementation at runtime, thereby avoiding any disruption. 

在旧的云服务被释放之前，新的云服务保证能正常服务用户。

**A key aspect**: the new cloud service implementation is guaranteed to *be* *successfully receiving and responding to* cloud service consumer requests **before** the original cloud service implementation is deactivated（解除） or removed.

A common approach is for **live VM migration** to move the entire virtual server instance that is hosting the cloud service.

The **automated scaling listener** and/or load balancer mechanisms can be used to trigger a temporary redirection of cloud service consumer requests, in response to scaling and workload distribution requirements.



## 12.4 Zero Downtime Arch 零宕机

zero downtime architecture: a ①sophisticated failover (故障转移) system，allows virtual servers to be dynamically ②moved to different physical server hosts, in the event that their ③original physical server host fails.

- **Multiple physical servers** are assembled into a group that is ①*controlled by a* *fault tolerance system***（***容错系统）* capable of ②*switching**（切换）**activity from one physical server to another*, without interruption. ③**The live VM migration** component is typically *a core part* of this form of high availability cloud architecture.
- **All virtual servers** are stored on ①a shared volume so that other physical server hosts in the same group can ②access their files.

<img src="https://cdn.jsdelivr.net/gh/chousinbin/Image/202404081433139.png" style="zoom:50%;" />

## 12.5 Cloud Balancing Arch 云负载均衡架构

The cloud balancing architecture establishes a specialized architectural model in which IT resources can be load-balanced across multiple clouds.

1. improve the performance and scalability of IT resources
2. increase the availability and reliability of IT resources
3. improve load-balancing and IT resource optimization

<img src="https://cdn.jsdelivr.net/gh/chousinbin/Image/202404081442156.png" alt="image-20240408144234069" style="zoom:50%;" />

## 12.6 Resource Reservation Arch

Resource Reservation Arch: establishes a system, one of the following is set aside（留出） exclusively（专门）for a given cloud consumer:

- single IT resource
- portion of an IT resource
- multiple IT resources

## 12.7 Dynamic Failure Detection and Recovery Arch $\divideontimes$

establishes a **resilient(弹性) watchdog system** to ①monitor and ②respond to a wide range of pre-defined failure scenarios（场景）.

- This system ①notifies and ②**escalates**(升级) the failure conditions that it cannot automatically resolve itself.
- It relies on the **intelligent watchdog monitor** to ①actively track IT resources and ②take pre-defined actions in response to pre-defined events

<center class = "half">
	<img src="https://cdn.jsdelivr.net/gh/chousinbin/Image/202404081502886.png" alt="image-20240408150204802" style="zoom:50%;" />
    <img src="https://cdn.jsdelivr.net/gh/chousinbin/Image/202404081502854.png" alt="image-20240408150234784" style="zoom:50%;" />
</center>

### Watchdog System five core functions

1. Watching 监视
2. deciding upon an event 基于事件做决定
3. acting upon an event 对事件作出行动
4. Reporting 报告
5. Escalating 升级处理

## 12.10 Storage Workload Management Arch

> 存储负载管理架构

enables LUNs to *be evenly distributed* across available cloud storage devices, while a storage capacity system is established to ensure that *runtime workloads* are *evenly distributed across* the LUNs.

**LUN migration** : a specialized storage **program** that is used to move LUNs from one storage device to another without interruption, while remaining transparent to cloud consumers.

<center class = “third">
    <img src="https://cdn.jsdelivr.net/gh/chousinbin/Image/202404081508404.png" style="zoom:30%;" />
    <img src="https://cdn.jsdelivr.net/gh/chousinbin/Image/202404081508404.png" style="zoom:30%;" />
    <img src="https://cdn.jsdelivr.net/gh/chousinbin/Image/202404081509984.png" style="zoom:30%;" />
</center>

