# 单调栈

#### 问题描述

给定一个长度为 $N$ 的整数数列，输出**每个数左边第一个比它小的数**，如果不存在则输出 $−1$。

#### 输入格式

第一行包含整数 $N$，表示数列长度。

第二行包含 $N$ 个整数，表示整数数列。

#### 输出格式

共一行，包含 $N$ 个整数，其中第 $i$ 个数表示第 $i$ 个数的左边第一个比它小的数，如果不存在则输出 $−1$。

#### 数据范围

$1≤N≤10$^5^
$1≤数列中元素≤10$^9^

#### 适用模型

求某数左边第一个比它大的数

求某数左边第一个比它小的数

求某数右边第一个比它大的数

求某数右边第一个比它小的数

#### 解题思路

每次读入一个值的时候维护一个栈，使得这个栈顶的值小于下一个要输入的值，并且是单调递增的。这样，栈顶元素就是下一个待读入的值的左边第一个比它小的数（栈非空情况）。

#### AC 代码

```c++
#include <bits/stdc++.h>
using namespace std;

const int N = 1e5 + 10;
int stk[N];
int tt;

int main()
{
	int n;
	cin >> n;

	while(n--)
	{
		int x;
		cin >> x;
		// 当栈顶元素 >= x 时，栈顶元素永远也用不上
		while(tt > 0 && stk[tt] >= x) tt--;
		// 此时栈元素单调递增，栈顶即为所求
		if(tt > 0) cout << stk[tt] << ' ';
		else cout << -1 << ' ';
		// 此回合元素入栈
		stk[++tt] = x;
	}
	return 0;
}
```

