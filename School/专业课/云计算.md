# Cloud Computing

> - 平时：30%
>   - 作业 * 4 = 12分
>   - 阶段测验 * 4 = 10分
>   - 上机 = 8 分
> - 期末：70%
>   - 选择：20 * 2，2 道头歌题
>   - 简答 *  3：3 - 6 章
>   - 图分析 * 2：7 - 9 章
>   - 架构 * 2：11 - 12 章

# 03 Understand Cloud

##  3.1 Origins And Influences

### History

- 1961 - utility computing 效用计算
- 2006 - cloud computing 云计算正式提出 lease 租用服务器
- 2006 - 2009
- 2009 +

### Definitions

pay - per - use

self - service

**NIST**: Cloud computing is a model for enabling **ubiquitous, convenient, on-demand** network access to a shared pool of configurable computing resources (e.g., networks, servers, storage, applications, and services) that can be rapidly provisioned and released with minimal management effort or service provider interaction.

**This Book**: Cloud computing is a specialized 特殊形式 form of **distributed computing** that introduces **utilization models** 效用模型 for **remotely** provisioning **scalable** and  **measured** 可测量 resources.

### Business Drivers

>  商业驱动力

- Capacity Planning 容量规划：future demand
  - Lead strategy 领先策略：anticipation of demand
  - Lag strategy 滞后策略：when reach its full capacity
  - Match strategy 匹配策略：adding IT resource capacity in small increment as demand increases
- Cost Reduction 降低成本
- Organizational agility 组织灵活性

### Tech innovation

- Clustering 集群化：failover features, redundancy, 
- Grid Computing 网格计算
- Virtualization 虚拟化
- Tech innovation vs. Enabling Tech 计算创新和使能技术

## 3.2 basic concept and terminology $\bigstar$

### Cloud

a distinct IT environment that is designed for the purpose of remotely provisioning scalable and measured IT resource.

<img src="https://cdn.jsdelivr.net/gh/chousinbin/Image/202403041455577.png" alt="image-20240304145548539" style="zoom: 25%;" />

### IT resource

An IT resource is a **physical or virtual** IT - related artifact **can be software-based or hardware-based**.

<img src="https://cdn.jsdelivr.net/gh/chousinbin/Image/202403041455063.png" alt="image-20240304145526980" style="zoom: 33%;" />

### On - Premise 企业内部的

On-Premised IT resource that is cannot be cloud - based

- On-Premised IT resource **can access and interact with a cloud - based IT resource**
- On-Premised IT resource **can be moved to a cloud**
- IT resource can **exist in cloud or on-premise**

### Cloud Provider and Cloud Consumer

- **Cloud Provider**: provide cloud-based IT resources
- **Cloud Consumer**: use cloud-based IT resources 

### Scaling 可扩展性

- **Horizontal Scaling** 水平扩展，不用停机，弹性增长与收缩
  - **Scaling Out**：增加相同资源 $add$
  - **Scaling In**：释放相同资源 
- **Vertical Scaling** 垂直扩展，可能停机
  - **Scaling Up**：换一个高性能资源 $replace$
  - **Scaling Down**：换一个低性能资源

### Cloud Service

any IT resource that is made **remotely accessible** via a cloud, provide IT resources as services that encapsulate other IT resouce

- remotely
- as-a-service
- a **Service - Levlel Agreement(SLA)** 服务水平协议 which **between provider and consumer**

### Cloud Service Consumer

a **temporary** 临时的 runtime role assumed bu a software program when it accesses a cloud service, **can be software or hardware**

<img src="https://cdn.jsdelivr.net/gh/chousinbin/Image/202403071351264.png" alt="image-20240307135134175" style="zoom:50%;" />

## 3.3 Goals and Benefits

- Reduced Investments and Proportional Costs 成比例的开销
- Increase Scalability
- Increase Reliablility and Availability

## 3.4 Risks and Challenges

- increased sercurity vulnerebilities (one cloud resource usually be used by different Cloud Consumer)
- reduced operational governance control
- limited portability between Cloud Providers
- multi-regional compliance and legal issues

# 04 Fundamental Concepts

## 4.1 Roles and Boundaries

### Cloud Provider

- Provides Cloud-Based IT resource 提供 IT 资源
- as per agreed upon SLA guarantees 依据每个 SLA 保证
- ensure the on-going operation 保证持续运行

### Cloud Consumer

- have a formal contract or arrangement 合同或约定 to acces  Cloud IT resource

### Cloud Service Owner

Person or organization that legally owns a cloud service

**Cloud Provider and Consumer** both can be cloud service owner

### Cloud Resource Administrator

Person or organization responsible for administering a cloud-based IT resource 

- Cloud Provider
- Cloud Consumer
- Third Party Oganization Contracted

### Additional Roles

- Cloud Auditor 云审计者
- Cloud Broker 云代理
- Cloud Carrier 云运营商

### Organizational Boundary

represents the **physical perimeter** that surrounds a set of IT resources that are owned and governed by an organization.

### Trust Boundary

A **logical perimeter** that typically spans **beyond physical boundaries** to represent the extent to which IT resources are trusted

## 4.2 Cloud Characteristics $\bigstar$

- on-demand usage 按需使用

- ubiquitous access 随处访问

- multitenancy and resource pooling  多租户和资源池

- elasticity 弹性

- measured usage 可测量使用

- resiliency 可恢复性


### On-Demand Usage

enables the service-based and usage-driven features found in mainstream clouds

### Ubiquitous Access

a cloud service to be widely accessible

### Multitenancy and Resource Pooling

each is isolated with other, IT resouce can be **dynamically assigned and reassigned**

### Elasticity

the automated ability of a cloud to transparently scale IT resources

### Measured Usage

keep track of the usage

### Resiliency

failover 故障转移 that distributes redundant 冗余 implementation 实例 of IT resource

## 4.3 Cloud Delivery Model

> 云交付模型

pre-packaged combination of IT resource offered by a cloud provider

#### IaaS

Infrastructure-as-a-Service 基础设施作为服务

hardware, network, connectivity, OS and other raw IT resources， also say **raw IT resource**

owing the **highest level control** of IT resources.

<img src="C:\Users\ChouS\AppData\Roaming\Typora\typora-user-images\image-20240516173217499.png" alt="image-20240516173217499" style="zoom: 33%;" />

#### PaaS

Platform-as-a-Service 平台作为服务

**ready-to-use environment**

<img src="https://cdn.jsdelivr.net/gh/chousinbin/Image/202405161732687.png" alt="image-20240516173238599" style="zoom:33%;" />

#### SaaS

Software-as-a-Service 软件作为服务

A software program positioned as a shared cloud service and made available as a “product” or generic utility represents the typical profile of a SaaS offering.

<img src="https://cdn.jsdelivr.net/gh/chousinbin/Image/202405161732322.png" alt="image-20240516173258240" style="zoom:33%;" />

<img src="https://cdn.jsdelivr.net/gh/chousinbin/Image/202405161734300.png" alt="image-20240516173420198" style="zoom:33%;" />

<img src="https://cdn.jsdelivr.net/gh/chousinbin/Image/202405161734245.png" alt="image-20240516173436131" style="zoom:33%;" />

## 4.4 Cloud Deployment Model

> 云部署模型

a specific type of cloud environment, primarily, distinguished by owner ship, size and access;

### Public Cloud

a publicly accessible cloud environment owned by a third-party cloud provider. 

### Community Cloud

access is **limited to a special community** of cloud consumers, others **not granted access** unless allowed by the community.

### Private Cloud

A private cloud is **owned by a single organization**.

### Hybrid Cloud

comprised of two or more different Cloud Deployment Model

# 05 Cloud-Enabling Tech

## ~~5.1 Broadband Net and Internet Arch~~

All cloud must connected to a network

The potential of cloud platforms therefore generally grows in parallel with advancements in Internet connectivity and service quality.

### ISP

#### Backbone Network 

- established and deployed by ISPs
- interconnected by core Router
- routers connect world’s multinational network

## 5.2 Data Center Tech $\bigstar$

### Data Center

- Grouping IT resources in close proximity 临近
- Power sharing
- Higher efficiency in shared IT resource usage
- Improved accessibility for IT personnel

### Modern Data Center

**Specialized IT infrastructure** used to **house centralized** IT resource

### Data Center Technology $\bigstar$

1. Virtualization 虚拟化
2. Standardization and Modularity 标准化和模块化
3. Automation 自动化
4. Remote Operation and Management 远程操作和管理
5. High Availability 高可用性
6. Security-Aware Design, Operation And Management 安全感知设计、操作和管理
7. Facilities 配套设施
8. Computing Hardware 计算硬件
9. Storage Hardware 存储硬件
10. Network Hardware 网络硬件

### Virtualization

- Data Center IT Resources: physical and virtualized

- Virtualization layer:

  - abstact and control of resource

  - comprised of operational and management tools of virtualization platforms

  - abstract physical computing and networking IT resources as virtualized components

    easier to allocate, operate, release monitor, control

- hypervisor 虚拟机监视器

- VIM (Virtualization Infrastructure Management) 虚拟化基础设施管理

<img src="https://cdn.jsdelivr.net/gh/chousinbin/Image/202405161929505.png" alt="image-20240516192938409" style="zoom: 33%;" />

## 5.3 Virtualization Tech $\bigstar$

> 1. Hardware Independence 硬件无关性
> 2. Server Consolidation 服务器整合
> 3. Resource Replication 资源复制
> 4. Operating System-Based Virtualization 基于操作系统虚拟化
> 5. Hardware-Based Virtualization 基于硬件虚拟化
> 6. Virtualization Management 虚拟化管理

- **Virtualization** is the process of **converting physical IT resource to a virtual IT resource**
- Most type of IT resource can be virtualized
- **Virtualization Software** create new virtual server
  - allocation of physical resource
  - install OS
  - client unaware of the virtualization process
- host or physical host: virtualization software run on a physical server
- Virtual Machine Management 虚拟机管理器 also be called **hypervisor**, **VM monitor**, **VM manager**

### Hardware Independence

resolving incompatibility problem 解决不兼容问题

As a result, cloning and manipulating 控制 virtual IT resources is much easier than duplicating 复制 physical hardware.

### Server Consolidation

- different virtual servers to **share one physical server**
- increse hardware utilization, load balancing, and optimization of available IT resource
- directly support common cloud deatures.

### Resource Replication

- virtual server are created as virtual disk image
- ease of manipulation and replication is one of the most salient features of virtualization technology 

### Operating System-Based Virtualization 

The installation of virtualization software in a **pre-existing operating system**(host operating system*宿主操作系统)*

- host OS can support hardware device
- OS virtualization can rectify 解决 hardware compatibility issues

Virtualization enabled hardware independence

- hardware IT resource to be more flexbly used
- Virtualization software translates hardware IT resources into virtualized IT resources compatible 兼容 with operating systems

<img src="https://cdn.jsdelivr.net/gh/chousinbin/Image/202405162056934.png" alt="image-20240516205640806" style="zoom: 33%;" />

### Hardware-Based Virtualization

Virtualization software directly install to physical host hardware  bypass the host OS,

a **hypervisor** has a simple user-interface, establish a virtualization management layer

Hardware-Based virtualization **more effective**

hardware-based virtualization **concerns compatibility** with hardware devices

<img src="https://cdn.jsdelivr.net/gh/chousinbin/Image/202405162057381.png" alt="image-20240516205707299" style="zoom:33%;" />

### Virtualization Management 

Virtualized IT resource management is often **supported by** virtualization infrastructure management **(VIM) tools**

- **collectively manage** virtual IT resources

- rely on a **centralized management** module

- runs on **a dedicated computer** 专用计算机

## 5.5 Multitenant Tech

> 多租户技术

multiple users to access the same application logic simultaneously

- each tenant has its own **view**
- not access others date

### Tenants individually customize application features

- User Interface 用户界面
- Business Process 业务流程
- Data Model 数据模型
- Access Control 访问控制

Support **share of various artifacts 构件 by multiple users** and maintaining security levels that **segregate 隔离 individual tenant operational environments**.

### Common characteristics

- Usage Isolation 使用隔离
- Data Security 数据安全
- Recovery 可恢复
- Application Upgrades 应用升级
- Scalability 可扩展性
- Metered Usage 使用计量
- Data Tier Isolation 数据层隔离

## 5.6 Service Tech $\bigstar$

**Service technology** is keystone foundation of cloud computing that formed the basis of the “as-a-service” cloud delivery models

### Service Agent

Service agent are **event-driven programs** designed to **intercept message** at runtime.

#### Active Service Agent

- intercepting and reading the contents of a message
- making **changes** to the **message contents**(most of header data and less commonly the body content) or change to the **message path itself**

#### Passive Service Agent

- only intercepting and reading the contents of a messaget, for monitoring, logging and reporting
- do not change message conten

Cloud-based environments rely heavily on system-level and custom service agents to perform runtime monitoring and measuring

# 06 Fundamental Cloud Security

**Information Security**: protect the integrity of and access to computer system and data

**IT Security Measure:** aim to defend against threats and interference that arise from both malicious intent and unintentional user error

## 6.1 Basic Terms $\bigstar$

1. **Confidentiality** 保密性
2. **Integrity** 完整性
3. **Authenticity** 真实性
4. **Availability** 可用性
5. **Threat** 威胁
6. **Vulnerability** 漏洞
7. **Risk** 风险
8. **Security Controls**
9. **Security Mechanisms**
10. **Security Policies**

### Confidentiality

**Confidentiality** is the characteristic of something being made **accessible only to authorized parties**

Within cloud environments, confidentiality primarily pertains to restricting(限制) access to data in transit 传输 and storage

<img src="https://cdn.jsdelivr.net/gh/chousinbin/Image/202405162139869.png" alt="image-20240516213951824" style="zoom: 50%;" />

### Integrity

**Integrity** is the characteristic of not having been **altered** by an **unauthorized party**

a cloud consumer can be guaranteed that the data it transmits to a cloud service **matches** the data received by that cloud service

<img src="https://cdn.jsdelivr.net/gh/chousinbin/Image/202405162141835.png" alt="image-20240516214126786" style="zoom:50%;" />

### Authenticity

**Authenticity** is the characteristic of something having been **provided by an authorized source**. 

Authentication in non-repudiable(不可否认) interactions provides proof that these interactions are uniquely linked to an authorized source.

### Availability

**Availability** is the characteristic of being accessible and usable during a **specified time period** 指定时间段

the availability is cloud provider and cloud carrier’s respond.

### Threat

A **threat** is a potential security violation that can challenge defenses in an attempt to breach privacy and/or cause harm

- Both manually and automatically instigated 激起 threats are designed to exploit 利用 known weaknesses, also referred to as vulnerabilities 漏洞. 
- A threat that is carried out results in an attack. 

### Vulnerability

**A vulnerability is a weakness that can be exploited** either because it is protected by ①insufficient(不足的) security controls, or because ②existing security controls are overcome by an attack.

### Risk

**Risk** is the <u>possibility of loss or harm</u> arising from <u>performing an activity</u>, measured by <u>threat level</u> and number of vulnerabilities

two metrics 标准: 

- the expectation of loss
- the probability of a threat

### Security Controls

**Security Controls** are used to <u>prevent or respond to security threat</u> and to <u>reduce or avoid risk</u>

### Security Mechanisms

definesive framework

### Security Policies

**Security polocies** establish a set of security rules and regulations.

##  6.2 Threat Agent

>  威胁作用者

- **Threat agent** is an entity that poses a threat, is a capable 实体 of carring out an attack.
- Cloud threat can <u>originate either internally or externally</u> from <u>human or software programs</u>

### Anonymous Attacker

> 匿名攻击者

- A <u>non-trusted cloud service consumer without permissions in the cloud</u>
- usually exist as an external software program

<img src="https://cdn.jsdelivr.net/gh/chousinbin/Image/202405182031813.png" alt="image-20240518203140731" style="zoom:33%;" />

### Malicious Service Agent

> 恶意服务代理

- is able to **intercept and forward the network traffic** that flows within a cloud
- exist as a service agent or an external program

<img src="https://cdn.jsdelivr.net/gh/chousinbin/Image/202405182033662.png" alt="image-20240518203312618" style="zoom:33%;" />

### Trusted Attacker

> 受信的攻击者, also called malicious tenants

- Trusted attacker shared IT resource in the same cloud enviroment as the cloud consumer 
- attempt to exploit legitimate credential to <u>target cloud providers and the cloud tenants 租户 with whom they share IT resources</u>
- Trusted attacker launch their attacks from within a cloud’s trust boundaries by abusing legitimate credentials or via the appropriation 挪用 of sensitive and confidential information.

<img src="https://cdn.jsdelivr.net/gh/chousinbin/Image/202405182041365.png" alt="image-20240518204100309" style="zoom:33%;" />

### Malicious Insider

> 恶意的内部人员

- Malicious insiders are <u>human threat agents</u> acting on behalf of or in <u>relation to the cloud provider</u>

- current or former employees or third parties to the cloud provider premise
- carry tremendous damage potential

<img src="https://cdn.jsdelivr.net/gh/chousinbin/Image/202405182044039.png" alt="image-20240518204429989" style="zoom:33%;" />

## 6.3 Cloud Security Threat

### Traffic Eavesdropping

> 流量窃听

- **When**: data being transferred to or within a cloud
- **Who**: malicious service agent
- **What**: illegitimate information gathering purpose 
- **How**: compromise the Confidentiality

<img src="https://cdn.jsdelivr.net/gh/chousinbin/Image/202405182054751.png" alt="image-20240518205414676" style="zoom:50%;" />

### Malicious Intermediary

> 恶意媒介

- **Who**: malicious service agent
- **What**: intercept and alter message, insert harmful date into message before forwarding it to its destination
- **How**: compromise Confidentiality and Integrity

<img src="https://cdn.jsdelivr.net/gh/chousinbin/Image/202405182056542.png" alt="image-20240518205626457" style="zoom: 50%;" />

#### Denial of Service

> 拒绝服务

- **Who**: Trusted Attacker
- **What**: overload IT resource
- **How**: Compromise Availability

<img src="https://cdn.jsdelivr.net/gh/chousinbin/Image/202405182059685.png" alt="image-20240518205908591" style="zoom: 50%;" />

### Insufficient Authorization

> 授权不足

- **When**: granted to an attacker erroneously or too broadly access.
- **Who**: Annonymous Attacker
- **What**: get access to protected IT resource
- **How**: Compromise Confidentiality and integrity

<img src="https://cdn.jsdelivr.net/gh/chousinbin/Image/202405182102452.png" alt="image-20240518210219369" style="zoom:50%;" />

A variation of this attack, known as **weak authentication** 弱认证

- When: weak password or shared account

<img src="https://cdn.jsdelivr.net/gh/chousinbin/Image/202405182106804.png" alt="image-20240518210645721" style="zoom: 33%;" />

### Virtualization Attack

> 虚拟化攻击

- **What**: use vulnerabilities in the virtualization platform, destory hardware, physical server
- **How**: destroy confidentiality, integrity, availability
- **Who**: trusted attacker

<img src="https://cdn.jsdelivr.net/gh/chousinbin/Image/202405182113259.png" alt="image-20240518211317173" style="zoom:33%;" />

### Overlapping Trust Boundaries

>  信任边界重叠
>
> Physical IT resources shared by different cloud consumers, these cloud service consumer have overlappint trust boundaries.

- **When**: IT resource shared by different cloud consumer 
- **How**: attack shared IT resource, destroy confidentiality, integrity, availability
- **Who**: malicious cloud service consumer

<img src="https://cdn.jsdelivr.net/gh/chousinbin/Image/202405182131773.png" alt="image-20240518213123542" style="zoom:50%;" />

# 07 Cloud Infrastructure Mech

> 云基础设施机制

## 7.1 Logic Network Perimeter

> 逻辑网络边界

Logic network perimeter established a <u>virtual network boundary</u> that **isolate** a group of related cloud-based IT resource.

Logic network perimeter established via network device that supply and control the connectivity of a data center.

### can implement

- isolate from non - authorized users: 与非授权用户隔离
- non - user: 与非用户隔离
- cloud consumer: 与云用户隔离
- control isolated IT resource’s bandwidth: 控制被隔离IT资源的带宽

### Network Device

- Virtual Firewall: actively filter network traffice
- Virtual Network: VLAN, isolate network enviroment
- virtual firewall, virtual network, logic network boundary

<center class = third>
    <img src="https://cdn.jsdelivr.net/gh/chousinbin/Image/202405182218225.png" style="zoom:33%;" />
    <img src="https://cdn.jsdelivr.net/gh/chousinbin/Image/202405182219721.png" style="zoom:33%;" />
    <img src="https://cdn.jsdelivr.net/gh/chousinbin/Image/202405182219980.png" style="zoom:33%;" />
</center>

## 7.2 Virtual Server

- **Virtual Server** is a form **virtualization software** that emulates 模拟 a physical server

- Is the most foundational building block of cloud environment.
- The **number of instances** a given physical server can share is **limited by capacity**.
- Cloud consumer can diy the environment

<img src="https://cdn.jsdelivr.net/gh/chousinbin/Image/202405191020340.png" alt="image-20240519102043197" style="zoom:50%;" />

## 7.3 Cloud Storage Device

- Cloud Storage Device is a specially storage device for **cloud-based** provisioning 基于云
- can be virtualized
- remote access via **cloud storage services**
- the related problem is **security, integrity, confidentiality** of data
- LANs provide locally stored date with network reliability and latency level are good than WANs.

### Cloud Storage Levels

#### Logic Unit of data storage

- **Files**
- **Blocks**: the lowest level of storage and closest to the hardware and the smallest unit of data
- **Datasets**: table - based, delimited or record format
- **Objects**: data and its associated metadata are organized as Web-based resources

Each of these data storage levels is commonly associated with a certain type of *technical interface* 

### Network Storage Interface

- SCSI
- CIFS
- NFS

### Object Storage Interface

Various typed of data can be referenced and stored as Web resources.

### Database Storage Interface

typically support **query language**, carry out using standard API or an administrative user-interface

#### Relational Data Storage:

- **rely on tables** to organize similar data into rows and columns
- Challenges pertain to **scaling and performance**

#### Non - Relational Data Storage

- looser structure
- less emphasis on defining relationship
- to avoid the potential complexity and processing overhead 负担
- can be more **horizentally scalable**
- **limit data portability**

## 7.4 Cloud Usage Monitor

is a lightweight and autonomous 自治 software program responsible for collecting and processing IT resource usage data.

- Monitoring Agent 监控代理
- Resource Agent 资源代理
- Polling Agent 轮询代理

### Monitoring Agent

- intermediary **event driven program**
- exist as a service agent and resides along existing communication paths to transparently monitor and analyze dataflows.
- to measure **network traffic and message metrics** 度量网络流量和消息指标

<img src="https://cdn.jsdelivr.net/gh/chousinbin/Image/202405191054312.png" alt="image-20240519105440224" style="zoom:50%;" />

(1) A cloud service consumer sends a request message to a cloud service . 
(2) The monitoring agent intercepts the message to collect relevant usage data. 
(3a) Allowing it to continue to the cloud service . 
(3b)The monitoring agent stores the collected usage data in a log database . 
(4) The cloud service replies with a response message 
(5) that is sent back to the cloud service consumer without being intercepted by the monitoring agent .

###  Resource Agent

- Resource Agent activity monitoring virtual server.
- monitor usage metrics at the resource software level.

<img src="https://cdn.jsdelivr.net/gh/chousinbin/Image/202405191102093.png" alt="image-20240519110228991" style="zoom: 33%;" />

(1)The resource agent is actively monitoring a virtual server and detects an increase in usage . 
(2)The resource agent receives a notification from the underlying  resource management program that the virtual server is being scaled up and stores the collected usage data in a log database, as per its monitoring metrics .

### Polling Agent

- collects cloud service usage data by polling IT resources
- used to periodically 周期的 monitor IT resource status.

<img src="https://cdn.jsdelivr.net/gh/chousinbin/Image/202405191104231.png" alt="image-20240519110403123" style="zoom: 33%;" />

(1)A polling agent monitors the status of a cloud service hosted by a virtual server by sending periodic polling request messages and receiving polling response messages that report usage status “A” after a number of polling cycles, until it receives a usage status of “B” ,
 (2)upon which the polling agent records the new usage status in the log database .

## 7.5 Resource Replication

>  资源复制

- Defined as the creation of multiple instances of the same IT resource
- performed when an IT resource’s availability and performance need to be enhenced
- Virtualization technology is used to implement the resource replication mechanism to copy cloud-based IT resources

<img src="https://cdn.jsdelivr.net/gh/chousinbin/Image/202405191107263.png" alt="image-20240519110721123" style="zoom: 33%;" />

## 7.6 Ready - Made Environment

is a defining component of the **PaaS cloud delivery model** that represents a pre-defined , cloud-based platform ...

Cloud consumer can remotely develop their software

- pre - installed IT resource , such as database, middleware, development tools, and governance tools
- a complete software development kit (SDK)
- middleware is available for multitenant platform

<img src="https://cdn.jsdelivr.net/gh/chousinbin/Image/202405191108761.png" alt="image-20240519110817652" style="zoom:33%;" />

# 08 Specialized Cloud Mech

## 8.1 Automated Scaling Listener $\bigstar$

> 自动伸缩监听器

**a service agent** that **monitors and tracks** communications between cloud service consumers and cloud services for **dynamic scaling** purposes

**Automated scaling listeners** are **deployed within the cloud**, typically **near the firewall**, from where they **automatically track workload(负载) status information.**

**Automatically scaling** IT resources <u>out or in based on parameters</u>(参数) previously defined by the cloud consumer (commonly referred to as auto-scaling). 

**Automatic notification**（通知）of the cloud consumer when  workloads exceed current thresholds（阈值）or fall below allocated resources. This way, the cloud consumer can choose to adjust its current IT resource allocation. 

在阈值内会自动伸缩，超出阈值通知通知管理员手动增加冗余实例。

<img src="https://cdn.jsdelivr.net/gh/chousinbin/Image/202403211411072.png" alt="image-20240321141155959" style="zoom:50%;" />

## 8.2 Load Balancer

> 负载均衡器

A common approach to **horizontal scaling** is to balance a workload **across two or more IT resources** to **increase performance and capacity** beyond what a single IT resource can provide. 
The load balancer mechanism is a **runtime agent**  with logic fundamentally based on this premise. 

#### Workload Distribution Functions

- Asymmetric Distribution 非对称分配：**larger workloads** are issued to IT resources with **higher processing** capacities；
- Workload Prioritization 负载优先级：workloads are scheduled(调度), queued(排队), discarded(丢弃), and distributed workloads **according to their priority levels**；
- Content-Aware Distribution 内容感知分配：requests are distributed to different IT resources as dictated(指示) by **the request content**；

<img src="https://cdn.jsdelivr.net/gh/chousinbin/Image/202403211412903.png" alt="image-20240321141217802" style="zoom:50%;" />

#### Exist

- multi-layer network switch 多层网络交换机
-  dedicated hardware appliance 专门的硬件设备
- dedicated software-based system (common in server operating systems)  专门的基于软件的系统
-  service agent (usually controlled by cloud management software) 服务代理

The load balancer is typically located on the communication path between the <u>IT resources generating the workload</u> and the IT <u>resources performing the workload processing</u>. use **polling scadule**

## 8.3 SLA Monitor

The SLA monitor mechanism is used to specifically **observe the runtime performance** of cloud services to **ensure that they are fulfilling 履行 the contractual 合同 $QoS$ requirements** that are published in SLAs.

The system can **proactively 主动地 repair or failover** cloud services when the SLA monitor reports a cloud service as “down”.

**Polling Agent**

<img src="https://cdn.jsdelivr.net/gh/chousinbin/Image/202405192027250.png" alt="image-20240519202508373" style="zoom:33%;" />

## 8.4 Pay-Per-Use Monitor

The pay-per-use monitor mechanism **measures** cloud-based IT resource **usage** in accordance with **predefined pricing parameters** and **generates usage logs** for fee calculations and billing purposes.

- request / response message quantity 请求 / 响应消息数量
- transmitted data volume 传送的数据量
- bandwidth consumption 带宽消耗

The data collected by the pay-per-use monitor is processed by a **billing management system**（计费管理系统）that calculates the payment fees. 

Pay-Per-Use Monitor can be implemented by <u>resource agent</u> or <u>monitoring agent</u>

<center class = third>
    <img src="https://cdn.jsdelivr.net/gh/chousinbin/Image/202405192033855.png" alt="image-20240519203334790" style="zoom: 50%;" />
    <img src="https://cdn.jsdelivr.net/gh/chousinbin/Image/202405192033634.png" alt="image-20240519203342572" style="zoom:50%;" />
</center>

## 8.5 Audit Monitor

> 审计监控器

- The audit monitor mechanism is used to **collect audit 审计 tracking data** for networks and IT resources
- in support of **regulatory(管理) and contractual obligations（合同义务）**

<img src="https://cdn.jsdelivr.net/gh/chousinbin/Image/202403211449004.png" alt="image-20240321144930874" style="zoom:50%;" />

(1)A cloud service consumer requests access to a cloud service by sending a login request message with security credentials .
 (2) The audit monitor intercepts the message 
(3)and forwards it to the authentication service . 
(4)The authentication service processes the security credentials. A response message is generated for the cloud service consumer, in addition to the results from the login attempt .
(5)The audit monitor intercepts the response message and stores the entire collected login event details in the log database, **as per the organization’s audit policy requirements .**
(6)Access has been granted, and a response is sent back to the cloud service consumer.

## 8.6 Failover System

> 故障转移

- The failover system mechanism is used to increase the **reliability and availability** of IT resources 
- **using established clustering technology** to **provide redundant  implementations**. 
- commonly used for **mission-critical programs** (关键任务程序) and **reusable services** 
- span **more than one geographical region**
- so that each location hosts one or more redundant implementations of the same IT resource
- The resource replication mechanism is sometimes utilized by the failover system to provide redundant IT resource instances, which are actively monitored for the detection of errors and unavailability conditions.

### Active - Active

>  主动-主动

redundant implementations of the IT resource **actively serve the workload synchronously**

<center class = third>
    <img src="https://cdn.jsdelivr.net/gh/chousinbin/Image/202405192044378.png" height = 170 />
    <img src="https://cdn.jsdelivr.net/gh/chousinbin/Image/202405192146106.png" height = 170 />
    <img src="https://cdn.jsdelivr.net/gh/chousinbin/Image/202405192147521.png" height = 170 />
</center>


### Active - Passive

> 主动-被动

a **standby 待机 or inactive 非活跃 implementation is activated** to take over the processing from the IT resource that becomes unavailable, and the corresponding workload is redirected 重定向 to the instance taking over the operation.

<center class = third>
    <img src="https://cdn.jsdelivr.net/gh/chousinbin/Image/202405192149562.png" height = 170 />
    <img src="https://cdn.jsdelivr.net/gh/chousinbin/Image/202405192149426.png" height = 170 />
    <img src="https://cdn.jsdelivr.net/gh/chousinbin/Image/202405192149042.png" height = 170 />
</center>


## 8.7 Hypervisor

> 虚拟机监视器

The hypervisor mechanism is a fundamental part of virtualization infrastructure that is primarily used to g**enerate virtual server instances of a physical server**.

- **VIM**: provides a range of features for **administering multiple hypervisors across physical servers**.
- A virtual server is a form of virtualization software that emulates 模拟 a physical server.

<img src="https://cdn.jsdelivr.net/gh/chousinbin/Image/202405192157747.png" alt="image-20240519215705639" style="zoom:50%;" />

## 8.8 Resource Cluster

> 资源集群

- The resource cluster mechanism is used to **group multiple IT resource instances**
- they **can be operated as a single IT resource.**
- **Advantage**: This increases the combined <u>computing capacity</u>, <u>load balancing</u>, and <u>availability</u> of the clustered IT resources.

<img src="https://cdn.jsdelivr.net/gh/chousinbin/Image/202403251339573.png" alt="image-20240325133951515" style="zoom:33%;" />

### Resource Cluster Types

1. Server Cluster: physical or virtual servers are cluster to increase performance and availability.
2. Database Cluster: improve data availability, maintains the consistency of data being stored at different storage devices 
3. Large Dataset Cluster 大数据集集群: Data partitioning and distribution 分区和分布

### Basic Resource Cluster Type

1. **Load Balanced Cluster** 负载均衡集群: distributing workloads among cluster nodes to increase IT resource capacity while preserving（保持）the centralization of IT resource management.(**Loadbalance Mech**)
2. **HA Cluster** HA集群：**high-availability cluste**r, it implements a **failover system mechanism.** has **redundant implementation**.

<img src="https://cdn.jsdelivr.net/gh/chousinbin/Image/202405202014433.png" alt="image-20240520201433346" style="zoom:50%;" />

​	Load balancing and resource replication are implemented through a cluster-enabled hypervisor. 

<img src="https://cdn.jsdelivr.net/gh/chousinbin/Image/202405202014431.png" alt="image-20240520201442348" style="zoom:50%;" />

A loosely coupled server cluster that incorporates 合并 a load balancer. There is no shared storage. Resource replication is used to replicate cloud storage devices through the network by the cluster software.

## 8.9 Multi-Device Broker

> 多设备代理

- The **multi-device broker** mechanism is used to facilitate(帮助) **runtime data transformation** 
- so as to make a **cloud service accessible to a wider range of cloud service consumer programs and devices**. 

<img src="https://cdn.jsdelivr.net/gh/chousinbin/Image/202403251356299.png" alt="image-20240325135627225" style="zoom:33%;" />

### Incorporate gateway components

- XML Gateway
- Cloud Storage Gateway
- Mobile Device Gateway

### Transformation Logic Levels

- transport protocols
- messaging protocols
- storage device protocols
- data schemas / data model 数据模式 / 模型

## 8.10 State Management Database

> 状态管理数据库

A state management database is **a storage device** that is used to **temporarily persist state** data for **software programs**.

- send status to database for reduce the press of memory.

<img src="https://cdn.jsdelivr.net/gh/chousinbin/Image/202403251413444.png" alt="image-20240325141346324" style="zoom:33%;" />

# 09 Cloud Management Mech

## 9.1 Remote Administration System

The remote administration system mechanism **provides tools and user-interfaces** for external cloud resource administrators to **configure and administer cloud-based IT resources**.

<img src="https://cdn.jsdelivr.net/gh/chousinbin/Image/202403251416011.png" alt="image-20240325141614962" style="zoom:33%;" />

Remote administration system can establish a portal(入口) for access to administration and management features of various underlying systems.

<img src="https://cdn.jsdelivr.net/gh/chousinbin/Image/202405202044741.png" alt="image-20240520204441675" style="zoom:50%;" />

### Two Primary Types of Portals

<img src="https://cdn.jsdelivr.net/gh/chousinbin/Image/202405202050736.png" alt="image-20240520205029694" style="zoom:50%;" />

#### Usage and Administration Portal 使用与管理入口

A general purpose portal that **centralizes management controls to different cloud-based IT resources** and can further **provide IT resource usage reports**. 

#### Self - Service Portal 自助服务入口

This is essentially 本质上 **a shopping portal** that allows cloud consumers to **search an up-to-date list of cloud services and IT resources** that are available from a cloud provider (usually for lease).

<img src="https://cdn.jsdelivr.net/gh/chousinbin/Image/202405202052478.png" alt="image-20240520205236395" style="zoom:50%;" />

(1)A cloud resource administrator uses the usage and administration portal to configure an already leased virtual server (not shown) to prepare it for hosting
(2) The cloud resource administrator then uses the self-service portal to select and request the provisioning of a new cloud service
(3)The cloud resource administrator then accesses the usage and administration portal again to configure the newly provisioned cloud service that is hosted on the virtual server
 (4)Throughout these steps, the remote administration system interacts with the necessary management systems to perform the requested actions.

## 9.2 Resource Management System

The **resource management system** mechanism helps **coordinate（协调） IT resources** in response **to management actions performed by both cloud consumers and cloud providers.**

<img src="https://cdn.jsdelivr.net/gh/chousinbin/Image/202403251441341.png" alt="image-20240325144130287" style="zoom:33%;" />

resource management system have a VIM and VM image repository. The VIM may have additional repositories

<img src="https://cdn.jsdelivr.net/gh/chousinbin/Image/202403251446298.png" alt="image-20240325144629217" style="zoom: 50%;" />

- Cloud consumer access resource management system from outside of Cloud by usage and administration portal
- Cloud provider sccess resource management system by native VIM console

## 9.3 SLA Management System

The SLA management system mechanism represents a range of **commercially available cloud management products** that **provide** features pertaining to the **administration**, collection, storage, reporting, and runtime notification of **SLA data**.

<img src="https://cdn.jsdelivr.net/gh/chousinbin/Image/202403251448767.png" alt="image-20240325144802714" style="zoom:33%;" />

An SLA management system encompassing an **SLA manager and QoS measurements repository.**

<img src="https://cdn.jsdelivr.net/gh/chousinbin/Image/202403251451094.png" alt="image-20240325145116990" style="zoom: 50%;" />

(1)A cloud service consumer interacts with a cloud service . 
(2A)An SLA monitor **intercepts** the exchanged messages, evaluates(评估) the interaction, and collects relevant runtime data in relation to quality-of-service guarantees defined in the cloud service’s SLA . 
(2B)The data collected is stored in a repository
(3)that is part of the SLA management system . 
(4)Queries can be issued and reports can be generated for an external cloud resource administrator via a usage and administration portal 
(5)or for an internal cloud resource administrator via the SLA management system’s native user-interface .

## 9.4 Billing Management System

The billing management system mechanism is dedicated to the **collection and processing of usage data** as it pertains **to cloud provider accounting and cloud consumer billing**. 
Specifically, the billing management system relies on **pay-per-use monitors to gather runtime usage data** that is stored in a repository that the system components then draw from for billing, reporting, and invoicing purposes。

<img src="https://cdn.jsdelivr.net/gh/chousinbin/Image/202403251452581.png" alt="image-20240325145226514" style="zoom:33%;" />

A billing management system comprised of a **pricing and contract manager** and a **pay-per-use measurements repository**.

**Pricing models** can vary from the traditional pay-per-use models, to <u>flat-rate</u>（固定费率） or <u>pay-per-allocation modes</u>（按分配付费）, or <u>combinations thereof.</u>
**Billing arrangements** 计费安排 be based on <u>pre-usage</u> and <u>post-usage payments</u>（使用前支付或使用后支付）.

<img src="https://cdn.jsdelivr.net/gh/chousinbin/Image/202403251455737.png" alt="image-20240325145512661" style="zoom: 50%;" />

(1) A cloud service consumer exchanges messages with a cloud service . 
(2A) A pay-per-use monitor keeps track of the usage and collects data relevant to billing , 
(2B) which is forwarded to a repository that is part of the billing management system . 
(3) The system periodically calculates the consolidated cloud service usage fees and **generates an invoice** for the cloud consumer 
(4) The invoice may be provided to the cloud consumer through the usage and administration portal .

# 11 Fundamental Cloud Arch

## 11.1 Workload Distribution Arch

> 负载分布架构

workload distribution architecture----IT resources can be **horizontally scaled** via the addition of one or more identical IT resources, and a **load balancer** that provides runtime logic capable of **evenly(平均) distributing the workload** among the available IT resources.

### Advantage

- **reduces** both IT resource **over-utilization and under-utilization** dependent load  balancing algorithms and runtime logic.
- carried out 支持 in support of <u>distributed virtual servers, cloud storage devices, and cloud services.</u> 

<img src="https://cdn.jsdelivr.net/gh/chousinbin/Image/202403281359821.png" alt="image-20240328135942741" style="zoom:33%;" />

1. load balancer **intercept** cloud service consumer’s request
2. **redirect** request to both Virtual Service A and B to ensure even distribution

Following mechanisms can be part of Workload Distribute Arch

- Audit Monitor 审计监控器
- Cloud Usage Monitor 云使用监控器
- Hypervisor 虚拟机监视器
- Logical Network Perimeter 逻辑网络边界
- Resource Cluster 资源集群
- Resource Replication 资源复制

## ~~11.2 Resource Pooling Arch~~

> 资源池架构

A resource pooling architecture is **based on the use of one or more resource pools**, in which identical IT resources are grouped and maintained by a system that automatically ensures that they **remain  synchronized.**

<img src="https://cdn.jsdelivr.net/gh/chousinbin/Image/202403281406183.png" alt="Snipaste_2024-03-28_14-06-22" style="zoom:33%;" />

A sample **resource pool** that is comprised of four **sub-pools** of <u>CPUs, memory, cloud storage devices, and virtual network devices.</u>

### Sibling Resource Pools 

> 同级资源池

one or more pools are the part of a larger poll that is be called Sibling Resource Pools.

<img src="https://cdn.jsdelivr.net/gh/chousinbin/Image/202403281415956.png" alt="image-20240328141507831" style="zoom:33%;" />

### Nested pool

> 嵌套资源池

Nested pools are typically used to provision cloud services that need to be rapidly instantiated using the same type of IT resources with the same configuration settings

<img src="https://cdn.jsdelivr.net/gh/chousinbin/Image/202403281415724.png" alt="image-20240328141522594" style="zoom:33%;" />

## 11.3 Dynamic Scalability Arch $\bigstar$

> 动态可扩展架构

The dynamic scalability architecture is an architectural model based on a system of **predefined scaling conditions** that **trigger the dynamic allocation** of IT resources from resource pools.

- Dynamic Horizontal Scaling 动态水平扩展
- Dynamic Vertical Scaling 动态垂直扩展
- Dynamic Relocation 动态重定位：IT resource relocation 重定位 to a host with more capacity

<center class = third>
    <img src="https://cdn.jsdelivr.net/gh/chousinbin/Image/202405212125928.png" height = 170 />
    <img src="https://cdn.jsdelivr.net/gh/chousinbin/Image/202405212127720.png" height = 170 />
    <img src="https://cdn.jsdelivr.net/gh/chousinbin/Image/202405212127989.png" height = 170 />
</center>

1. Cloud service consumers are sending requests to a cloud service.
2. The number of requests coming from cloud service consumers increases.
3. The automated scaling listener monitors the cloud service to determine if predefined capacity thresholds are being exceeded.
4. The workload exceeds the performance thresholds. The automated scaling listener determines the next course of action based on a predefined scaling policy.
5. If the cloud service implementation is deemed eligible for additional scaling, the automated scaling listener initiates the scaling process.
6. The automated scaling listener sends a signal to the **resource replication mechanism**.
7. The resource replication mechanism **creates more instances of the cloud service**.
8. Now that the increased workload has been accommodated, the automated scaling listener resumes monitoring and adjusts by adding or detracting IT resources, as required.

## 11.4 Elastic Resource Capacity Arch $\bigstar$

> 弹性资源容量架构

The elastic resource capacity architecture is primarily related to the **dynamic provisioning of virtual servers**, using a system that **allocates and reclaims（回收） CPUs and RAM** in **immediate response to the fluctuating processing requirements** of hosted IT resources, belong to **Vertical Scaling.**

<center>
    <img src="https://cdn.jsdelivr.net/gh/chousinbin/Image/202405212142603.png" height = 400 />
    <img src="https://cdn.jsdelivr.net/gh/chousinbin/Image/202405212142611.png" height = 400 />
</center>

1. Cloud service consumers are actively sending requests to a cloud service.
2. These requests are monitored by an automated scaling listener.
3. An **intelligent automation engine** script is deployed with workflow logic.
4. This script is capable of notifying the resource pool using allocation requests.
5. Cloud service consumer requests increase.
6. The increase in requests causes the automated scaling listener to signal the intelligent automation engine to execute the script.
7. The script runs the workflow logic that signals the hypervisor to allocate more IT resources from the resource pools.
8. The hypervisor allocates additional CPU and RAM to the virtual server, enabling the increased workload to be handled.

## 11.5 Service Load Balancing Arch $\bigstar$

> 服务负载均衡架构

The **service load balancing architecture** can be considered **a specialized variation of the workload distribution architecture** that is geared specifically **for scaling cloud service implementations**. Add a **load balancing** system.

> The load balancer can be positioned either independent of the cloud services and their host servers (Figure 11.10), or built-in as part of the application or server’s environment. In the latter case, a primary server with the load balancing logic can communicate with neighboring servers to balance the workload (Figure 11.11).

<center>
    <img src="https://cdn.jsdelivr.net/gh/chousinbin/Image/202404011343184.png" width = 400 title = 1 />
    <img src="https://cdn.jsdelivr.net/gh/chousinbin/Image/202404011345838.png" width = 400 title = 2 />
</center>

## ~~11.6 Cloud Bursting Arch~~

> 云爆发

The cloud bursting architecture establishes a form of ①dynamic scaling that② scales or “bursts out” on-premise IT resources into a cloud whenever ③predefined capacity thresholds have been reached.

The corresponding cloud-based IT resources are redundantly pre-deployed but remain inactive until cloud bursting occurs.
After they are no longer required, the cloud-based IT resources are released and the architecture “bursts in” back to the on-premise environment.
The automated scaling listener determines when to redirect requests to cloud-based IT resources, and resource replication is used to maintain synchronicity between on-premise and cloud-based IT resources in relation to state information 

<img src="https://cdn.jsdelivr.net/gh/chousinbin/Image/202404011356807.png" style="zoom:33%;" />

## 11.7 Elastic Disk Provisioning Arch

> 弹性磁盘供给架构

The elastic disk provisioning architecture establishes a **dynamic storage provisioning system** that ensures that the cloud consumer is **granularly（精细） billed** for the exact amount of storage that it actually uses.

This system uses **thin-provisioning technology** (自动精简供给技术) for the dynamic **allocation of storage space**, and is further supported by **runtime usage monitoring** to collect **accurate（准确的）usage data** for billing purposes.

Thin-provisioning software (自动精简供给软件) is **installed on virtual servers** that **process dynamic storage allocation via the hypervisor**, while the **pay-per-use monitor tracks and reports granular billing-related disk usage data** (Figure 11.15).

<img src="https://cdn.jsdelivr.net/gh/chousinbin/Image/202404011435493.png" alt="image-20240401143512411" style="zoom: 50%;" />

1. A request is received from a cloud consumer, initiating the provisioning of a new virtual server instance.
2. As part of the provisioning process, the hard disks are selected to be dynamic or thin-provisioned disks.
3. The hypervisor calls a dynamic disk allocation component to create thin disks for the virtual server.
4. Virtual server disks are created via the thin-provisioning program and stored in a folder that starts with a near-zero size. The size of this folder and its files grow as operating applications are installed and additional files are copied onto the virtual server.
5. The pay-per-use monitor **tracks the actual dynamically allocated storage for billing** purposes.

## 11.8 Redundant Storage Arch $\bigstar$

> 冗余存储架构

The redundant storage architecture introduces(引入) a **secondary duplicate cloud storage device** 辅助重复云存储设备 as part of a failover system that **synchronizes its data** with the data in the primary cloud storage device.

A **storage service gateway** diverts（转移） cloud consumer requests to the secondary device whenever the primary device fails。

<center class = third>
    <img src="https://cdn.jsdelivr.net/gh/chousinbin/Image/202405212215162.png" height = 200 />
    <img src="https://cdn.jsdelivr.net/gh/chousinbin/Image/202404011434342.png" height = 200 />
</center>



A **logical unit number (LUN)** is a logical drive that represents a partition（分区） of a physical drive.

The **storage service gateway** is a component that acts as the external interface to cloud storage services, and is ②capable of automatically redirecting cloud consumer requests whenever the location of the requested data has changed.

<center>
    <img src="https://cdn.jsdelivr.net/gh/chousinbin/Image/202404011431949.png" height = 100 />
    <img src="https://cdn.jsdelivr.net/gh/chousinbin/Image/202405212218976.png" height = 100 />
</center>

This cloud architecture primarily **relies on a storage replication system** that keeps the primary cloud storage device **synchronized** with its duplicate secondary cloud storage devices.

Storage replication is a **variation of the resource replication** mechanisms used to **synchronously or asynchronously replicate data** from a primary storage device to a secondary storage device. It can be used to replicate partial and entire LUNs

# 12 Advanced Cloud Arch

## 12.1 Hypervisor Clustering Arch $\bigstar \bigstar$

Hypervisor clustering architecture: establishes a high-availability cluster of hypervisors across multiple physical servers.

<img src="https://cdn.jsdelivr.net/gh/chousinbin/Image/202404011445464.png" alt="image-20240401144524396" style="zoom:33%;" />

- **Heartbeats** (心跳):  ①system-level messages exchanged ②between hypervisors, hypervisors and virtual servers, and hypervisors and VIMs.

  <img src="https://cdn.jsdelivr.net/gh/chousinbin/Image/202404011451474.png" alt="image-20240401145146440" style="zoom:33%;" />

- **VIM**: control the hypervisor cluster, which sends regular heartbeat messages to the hypervisors① to confirm(确认) that they are up and running. ②Unacknowledged heartbeat messages, VIM to initiate the live VM migration program, move the affected virtual servers to a new host.

- **Live VM migration**: a system that is capable of relocating virtual servers or virtual server instances at runtime.

  <img src="https://cdn.jsdelivr.net/gh/chousinbin/Image/202404011451255.png" alt="image-20240401145133214" style="zoom:33%;" />

**The other physical servers and the VIM stop receiving heartbeat messages from Physical Server B.**

The Physical Server B was failed, and Virtual Server C be transformed from Physical Server B to Physical Server C.

<img src="https://cdn.jsdelivr.net/gh/chousinbin/Image/202404011456778.png" alt="image-20240401145654692" style="zoom:50%;" />

## 12.2 Load balanced Virtual Server Instances Arch $\bigstar$

Physical server over and under-utilization can increase dramatically(显著地) over time, s

**The load balanced virtual server instances architecture** establishes a ①capacity **watchdog system** that dynamically calculates ②**virtual server instances and associated workloads**, ③before distributing the processing across available physical server hosts

<img src="https://cdn.jsdelivr.net/gh/chousinbin/Image/202404081348948.png" alt="image-20240408134841875" style="zoom:50%;" />

### Watchdog System

- a capacity watchdog cloud usage monitor
- the live VM migration program 在线 VIM 迁移程序
- a capacity planer 容量计划器 = Load balancer + VIM’s part

<center class = “third">
	<img src="https://cdn.jsdelivr.net/gh/chousinbin/Image/202404081402370.png" width = '300'/>
    <img src="https://cdn.jsdelivr.net/gh/chousinbin/Image/202404081403572.png" width = '300'/>
    <img src="https://cdn.jsdelivr.net/gh/chousinbin/Image/202404081410057.png" width = '300'/>
</center>

## 12.3 Non - Disruptive Service Relocation Arch $\bigstar$

> 不中断服务重定位架构

**non-disruptive service relocation architecture** establishes a system by which a predefined event triggers the *duplication* or *migration* of a cloud service implementation at runtime, thereby avoiding any disruption. 

在旧的云服务被释放之前，新的云服务保证能正常服务用户。

**A key aspect**: the new cloud service implementation is guaranteed to *be* *successfully receiving and responding to* cloud service consumer requests **before** the original cloud service implementation is deactivated（解除） or removed.

A common approach is for **live VM migration** to move the entire virtual server instance that is hosting the cloud service.

The **automated scaling listener** and/or load balancer mechanisms can be used to trigger a temporary redirection of cloud service consumer requests, in response to scaling and workload distribution requirements.

## ~~12.4 Zero Downtime Arch~~

> 零宕机

zero downtime architecture: a ①sophisticated failover (故障转移) system，allows virtual servers to be dynamically ②moved to different physical server hosts, in the event that their ③original physical server host fails.

- **Multiple physical servers** are assembled into a group that is ①*controlled by a* *fault tolerance system***（***容错系统）* capable of ②*switching**（切换）**activity from one physical server to another*, without interruption. ③**The live VM migration** component is typically *a core part* of this form of high availability cloud architecture.
- **All virtual servers** are stored on ①a shared volume so that other physical server hosts in the same group can ②access their files.

<img src="https://cdn.jsdelivr.net/gh/chousinbin/Image/202404081433139.png" style="zoom:50%;" />

## 12.5 Cloud Balancing Arch

> 云负载均衡架构

The cloud balancing architecture establishes a specialized architectural model in which IT resources can be load-balanced across multiple clouds.

1. improve the performance and scalability of IT resources
2. increase the availability and reliability of IT resources
3. improve load-balancing and IT resource optimization

<img src="https://cdn.jsdelivr.net/gh/chousinbin/Image/202404081442156.png" alt="image-20240408144234069" style="zoom:50%;" />

## ~~12.6 Resource Reservation Arch~~

Resource Reservation Arch: establishes a system, one of the following is set aside（留出） exclusively（专门）for a given cloud consumer:

- single IT resource
- portion of an IT resource
- multiple IT resources

## 12.7 Dynamic Failure Detection and Recovery Arch $\bigstar$

establishes a **resilient(弹性) watchdog system** to ①monitor and ②respond to a wide range of pre-defined failure scenarios（场景）.

- This system ①notifies and ②**escalates**(升级) the failure conditions that it cannot automatically resolve itself.
- It relies on the **intelligent watchdog monitor** to ①actively track IT resources and ②take pre-defined actions in response to pre-defined events

<center class = "half">
	<img src="https://cdn.jsdelivr.net/gh/chousinbin/Image/202404081502886.png" alt="image-20240408150204802" style="zoom:50%;" />
    <img src="https://cdn.jsdelivr.net/gh/chousinbin/Image/202404081502854.png" alt="image-20240408150234784" style="zoom:50%;" />
</center>

### Watchdog System five core functions

1. Watching 监视
2. deciding upon an event 基于事件做决定
3. acting upon an event 对事件作出行动
4. Reporting 报告
5. Escalating 升级处理

## 12.10 Storage Workload Management Arch

> 存储负载管理架构

enables LUNs to *be evenly distributed* across available cloud storage devices, while a storage capacity system is established to ensure that *runtime workloads* are *evenly distributed across* the LUNs.

**LUN migration** : a specialized storage **program** that is used to move LUNs from one storage device to another without interruption, while remaining transparent to cloud consumers.

<center class = “third">
    <img src="https://cdn.jsdelivr.net/gh/chousinbin/Image/202404081508404.png" style="zoom:30%;" />
    <img src="https://cdn.jsdelivr.net/gh/chousinbin/Image/202404081508404.png" style="zoom:30%;" />
    <img src="https://cdn.jsdelivr.net/gh/chousinbin/Image/202404081509984.png" style="zoom:30%;" />
</center>
